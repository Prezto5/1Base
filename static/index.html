<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>База HoReCa (Хорека)</title>
    <meta name="viewport" content="width=855, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; background: #fafbfa; margin: 0; }
        .container { max-width: 800px; margin: 30px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 24px; }
        .flex { display: flex; gap: 24px; }
        .left { width: 260px; }
        .right { flex: 1; }
        .top-badge { background: gold; color: #fff; font-weight: bold; border-radius: 4px; padding: 2px 8px; position: absolute; left: 16px; top: 16px; }
        .product-img { width: 100%; border-radius: 12px; }
        .region-title { text-align: center; font-size: 1.3em; font-weight: bold; margin: 12px 0 0 0; }
        .price { color: #4caf50; font-size: 2em; font-weight: bold; margin: 0 0 12px 0; }
        .select-region { font-size: 1em; padding: 4px 8px; border-radius: 4px; border: 1px solid #ccc; }
        .info-box { background: #f6f6f6; border-radius: 8px; padding: 12px 16px; margin: 16px 0; }
        .info-box strong { color: #222; }
        .check { color: #4caf50; font-size: 1.2em; }
        .features { margin: 16px 0; }
        .features li { margin-bottom: 6px; }
        .btn { background: #8bc34a; color: #fff; border: none; border-radius: 6px; padding: 12px 32px; font-size: 1.1em; margin-right: 12px; cursor: pointer; transition: background 0.2s; }
        .btn:hover { background: #689f38; }
        .rating { display: flex; align-items: center; gap: 8px; margin: 16px 0; }
        .stars { color: #ffc107; font-size: 1.2em; }
        .tags { margin: 12px 0; }
        .tag { display: inline-block; background: #f0f0f0; color: #444; border-radius: 6px; padding: 4px 10px; margin: 2px 4px; font-size: 0.95em; }
        .section-title { font-size: 1.2em; font-weight: bold; margin: 24px 0 8px 0; }
        .stats { display: flex; flex-wrap: wrap; gap: 18px; margin: 12px 0; }
        .stat { background: #f6f6f6; border-radius: 8px; padding: 10px 18px; min-width: 180px; text-align: center; }
        .stat .num { color: #4caf50; font-size: 1.3em; font-weight: bold; }
        .stat .desc { color: #222; font-size: 1em; }
        @media (max-width: 700px) { .flex { flex-direction: column; } .left, .right { width: 100%; } }
    </style>
</head>
<body>
<div class="container">
    <div class="flex">
        <div class="left">
            <div style="position: relative;">
                <span class="top-badge">ТОП</span>
                <img id="product-img" class="product-img" src="" alt="Картинка продукта">
            </div>
            <div class="region-title" id="region-title">БЕЛГОРОД</div>
        </div>
        <div class="right">
            <div style="font-size: 1.5em; font-weight: bold;">База HoReCa (Хорека)</div>
            <div class="price" id="price">1 000 руб.</div>
            <div style="margin: 8px 0 12px 0;">
                Регион:
                <select id="region-select" class="select-region"></select>
            </div>
            <div class="info-box">
                <div>Всего компаний в базе: <strong id="total-companies">550 шт.</strong></div>
                <div><span class="check">✔</span> Контакты без повторов</div>
                <div style="font-size: 0.95em; margin-top: 6px;">Вы можете изменить регион выборки или настроить базу в нашем <a href="#">гибком конфигураторе</a></div>
            </div>
            <ul class="features">
                <li>✔ 6 месяцев бесплатного обновления</li>
                <li><strong>База обновлена:</strong> 09 июля 2025</li>
                <li><strong>Наш телефон:</strong> <a href="tel:88007752912">8 800 775-29-12</a></li>
            </ul>
            <button class="btn">Скачать демо</button>
            <button class="btn">Оплатить</button>
        </div>
    </div>
    <div class="rating">
        <span style="font-size: 1.1em;">Рейтинг базы</span>
        <span id="rating-value" style="font-weight: bold;">4.8</span>
        <span class="stars">★★★★★</span>
        <span style="color: #888;">Оценок: <span id="reviews-count">190</span></span>
    </div>
    <div class="tags">
        <span class="tag">рестораны</span>
        <span class="tag">кафе</span>
        <span class="tag">гостиницы</span>
        <span class="tag">базы отдыха</span>
        <span class="tag">отели</span>
        <span class="tag">бары</span>
        <span class="tag">клубы</span>
        <span class="tag">столовые</span>
        <span class="tag">хорека</span>
    </div>
    <div class="section-title">О Базе HoReCa (Хорека) <span id="region-title-2">Белгорода</span></div>
    <div class="stats">
        <div class="stat"><div class="num" id="stat-total">550 шт.</div><div class="desc">Всего компаний в базе</div></div>
        <div class="stat"><div class="num" id="stat-phone">550 шт.</div><div class="desc">Компаний с телефонами</div></div>
        <div class="stat"><div class="num" id="stat-email">142 шт.</div><div class="desc">Компаний с Email</div></div>
        <div class="stat"><div class="num" id="stat-site">287 шт.</div><div class="desc">Компаний с сайтами</div></div>
        <div class="stat"><div class="num" id="stat-address">550 шт.</div><div class="desc">Компаний с адресами</div></div>
        <div class="stat"><div class="num" id="stat-activity">550 шт.</div><div class="desc">Компаний с указанием сферы деятельности</div></div>
    </div>
</div>
<script>
const productSlug = 'baza-horeca';
let regions = [];

async function fetchRegions() {
    const res = await fetch(`/api/v1/products/${productSlug}/regions`);
    regions = await res.json();
    const select = document.getElementById('region-select');
    select.innerHTML = '';
    regions.forEach(region => {
        const opt = document.createElement('option');
        opt.value = region.slug;
        opt.textContent = region.name_nominative;
        select.appendChild(opt);
    });
    if (regions.length) {
        select.value = regions[0].slug;
        updateRegion(regions[0].slug);
    }
    select.onchange = e => updateRegion(e.target.value);
}

async function updateRegion(regionSlug) {
    const res = await fetch(`/api/v1/products/${productSlug}/${regionSlug}`);
    const data = await res.json();
    document.getElementById('product-img').src = data.image_url || '';
    document.getElementById('region-title').textContent = data.region.name_nominative.toUpperCase();
    document.getElementById('region-title-2').textContent = data.region.name_genitive;
    document.getElementById('price').textContent = `${parseInt(data.price).toLocaleString()} руб.`;
    document.getElementById('total-companies').textContent = data.total_companies + ' шт.';
    document.getElementById('stat-total').textContent = data.total_companies + ' шт.';
    document.getElementById('stat-phone').textContent = data.companies_with_phone + ' шт.';
    document.getElementById('stat-email').textContent = data.companies_with_email + ' шт.';
    document.getElementById('stat-site').textContent = data.companies_with_site + ' шт.';
    document.getElementById('stat-address').textContent = data.companies_with_address + ' шт.';
    document.getElementById('stat-activity').textContent = data.companies_with_activity + ' шт.';
    document.title = data.page_slug || 'База HoReCa (Хорека)';
}

async function fetchRating() {
    const res = await fetch(`/api/v1/products/${productSlug}/rating`);
    const data = await res.json();
    document.getElementById('rating-value').textContent = data.average_rating.toFixed(1);
    document.getElementById('reviews-count').textContent = data.reviews_count;
}

fetchRegions();
fetchRating();
</script>
</body>
</html> 